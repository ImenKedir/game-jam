# nixpacks.toml
providers = ["node"]

[phases.setup]
  nixPkgs = ["nodejs"]

[phases.install]
  cmds = ["npm ci"]  # Explicitly install dependencies with npm ci

[phases.build]
  cmds = ["npm run build"]  # Runs "robo build"

[start]
  cmd = "npm run start"     # Runs "robo start"

[variables]
  HOST = "0.0.0.0"  # Bind to all interfaces
  PORT = "8080"     # Default, overridden by Railway if set
  NODE_ENV = "production"